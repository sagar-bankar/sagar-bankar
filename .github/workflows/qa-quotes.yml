name: Update QA Quote

on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:

permissions:
  contents: write

jobs:
  update-quote:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Generate QA Quote
        run: |
          mkdir -p quotes
          QUOTES=(
            "A tester's job is to think like the user and break like a hacker."
            "Testing is the art of risk reduction."
            "Quality is built in, not tested in."
            "Great testers prevent disasters before users see them."
            "If you did not test it, you do not know it works."
            "Testing turns assumptions into confidence."
          )

          RANDOM_QUOTE=${QUOTES[$RANDOM % ${#QUOTES[@]}]}

          cat <<EOF > quotes/quote.svg
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="180">
  <defs>
    <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0d1117"/>
      <stop offset="100%" stop-color="#161b22"/>
    </linearGradient>
  </defs>

  <rect x="0" y="0" rx="16" ry="16" width="900" height="180" fill="url(#grad)" stroke="#30363d"/>

  <text x="40" y="70" fill="#58a6ff" font-size="22"
        font-family="Segoe UI, Arial" font-style="italic">
    “$RANDOM_QUOTE”
  </text>

  <text x="860" y="130" fill="#8b949e" font-size="16"
        font-family="Segoe UI, Arial" text-anchor="end">
    — Software Test Engineer
  </text>
</svg>
EOF


      - name: Commit & Push
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add quotes/quote.svg
          git commit -m "Update QA quote" || echo "No changes"
          git push
