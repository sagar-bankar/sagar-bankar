name: Update QA Quote

on:
  schedule:
    - cron: "*/10 * * * *"
  workflow_dispatch:

permissions:
  contents: write

jobs:
  update-quote:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Generate QA Quote
        shell: bash
        run: |
          mkdir -p quotes

          QUOTES=(
            "A tester's job is to think like the user and break like a hacker."
            "Testing is the art of risk reduction."
            "Quality is built in, not tested in."
            "Great testers prevent disasters before users see them."
            "If you did not test it, you do not know it works."
            "Testing turns assumptions into confidence."
          )

          RANDOM_QUOTE="${QUOTES[$RANDOM % ${#QUOTES[@]}]}"

          cat <<EOF > quotes/quote.svg
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="180">
  <rect width="900" height="180" rx="20" fill="#0f2027"/>
  <text x="50%" y="80" text-anchor="middle"
        font-family="Segoe UI, Arial"
        font-size="26"
        fill="#ffffff">
    $RANDOM_QUOTE
  </text>
  <text x="880" y="145" text-anchor="end"
        font-family="Segoe UI, Arial"
        font-size="14"
        fill="#cfd9df">
    â€” Sagar Bankar | Software Test Engineer
  </text>
</svg>
EOF

      - name: Commit and Push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
          git add quotes/quote.svg
          git commit -m "Auto-update QA quote" || echo "No changes"
          git push
